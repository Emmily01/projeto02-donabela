{% extends 'base.html' %}
{% block content %}
  <h2>Cardápio</h2>
  {% if user %}
    <p><a class="btn" href="{{ url_for('produto_novo') }}">+ Novo produto</a></p>
  {% endif %}
  <table class="table">
    <thead>
      <tr><th>Nome</th><th>Categoria</th><th>Preço</th><th>Descrição</th>{% if user %}<th>Ações</th>{% endif %}</tr>
    </thead>
    <tbody>
      {% for p in produtos %}
      <tr>
        <td>{{ p.nome }}</td>
        <td>{{ p.categoria or '-' }}</td>
        <td>R$ {{ '%.2f'|format(p.preco) }}</td>
        <td>{{ p.descricao or '-' }}</td>
        {% if user %}
        <td>
          <a href="{{ url_for('produto_editar', produto_id=p.id) }}">Editar</a>
          <form method="post" action="{{ url_for('produto_excluir', produto_id=p.id) }}" style="display:inline" onsubmit="return confirm('Excluir produto?');">
            <button type="submit" class="link-btn">Excluir</button>
          </form>
        </td>
        {% endif %}
      </tr>
      {% else %}
      <tr><td colspan="5">Nenhum produto cadastrado.</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
